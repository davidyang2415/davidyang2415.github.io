---
layout:post
title:Python Exception
categries:
- Programming Language
tags:
- Python
---

# Python语法之基础语法
---
## 类型系统
- 标识符
	- Python是大小写敏感的语言
	- 标识符组成：[a-zA-Z_][a-zA-Z0-9_]*
	- 特殊标识符：
		- _xxx 不会被import *引入命名空间，可用于内部实现细节
		- __xxx 类私有成员，内部定义成_className__xxx
		- __xxx__ Python保留
	- 关键字(keyword)
		- try except finally raise
		- if elif else for while continue break pass
		- def lambda class return yield
		- print assert exec del
		- from import global
		- and or not in is as
		- None True False
- 常量：python中不支持常量定义，可以将常量定义为全大写形式
- 字面值
	- 字面值是指源代码中直接出现的以人类可读形式表示的固定值
	- 布尔类型字面值：True/False
	- 数字类型字面值
		- 数字类型可分为：整型、长整型、浮点数
		- 长整型数字，通过添加后缀L表示
		- 数字类型字面值也可以使用科学记数法表示
		- 十六进制使用前缀0x,八进制使用前缀0
	- 字符串类型字面值
		- 字符串定义方式：
			- 单引号、双引号，可使用转义字符，两种定义方式无区别
			- 三引号，不使用转移字符，输出书写格式，可作为类和函数__doc__属性，可作为多行注释
		- 相邻的字面字符串会被自动拼接 -- 只适用于字面字符串，不同于字符串对象拼接
		- python字符串不是通过NULL或'\0'做结尾符来标记的
		- 字符串字面值编码是由源文件编码指定的
		- 字符串存储：str(字节串),unicode(字节序列，内部编码) -- 都是basestring的子类
		- 编码转换，使用encode()与decode()函数
		- 字符串字面值格式：
			- unicode字符串：使用前缀u/U字符
			- 原字符串(不使用转移字符)：使用前缀r/R字符，且最后一个字符不能使反斜杠
- 基本类型
	- 空值类型：None，表示什么都没有
	- 布尔类型：True,False
		- 假值情况：None,False,所有值为0的数,空的容器(如空字符串、空列表、空元组、空字典等)
		- True和False可被直接当1和0使用，False-True结果是－1
	- 数字类型
		- 整型
			- 整数无法表示的数字会自动转换为长整型--在整数后加后缀L
			- 整型与长整型计算时会统一采用长整型
			- 当除数与被除数都是整型时进行整除法
		- 浮点型
			- 带有浮点数的除法是数学意义上的除法，可使用运算符//获取整除法结果
		- 虚数，不常使用
- 内置容器：
	- 序列：元组、列表、字符串
	- 映射：字典
- 类类型

## 语句
- 表达式:
	- 一行为一个语句，可选单行多个语句之间用分号(;)分隔--不推荐
	- 跨行单语句：( [ { """ '''未闭合，或行末使用"\"符号--无引号
	- assert expr[,message] 断言
	- del name[,...]
	- print [>>obj]expr[,...][,]
	- exec expr[in globals[,locals]]
	- fct([expr[,...]],[name=expr[,...]][,*args][**kwargs])
	- name[,...]=expr
- 语句块
	- 同一个语句块拥有相同的缩进，推荐将IDE的tab设置成4个空格
	- pass 空语句块
- 断言：assert cond message

## 操作符
- 赋值操作
	- 数据都是有类型的对象，变量名是动态绑定到对象上
		- 垃圾回收(GC),采用引用计数的方法来追踪对象
		- 通过del来解除变量名和对象建的绑定关系
	- 对象的可变与不可变，是指对象本身的变化，其中不可变对象只能通过new新对象再绑定
		- 不可变对象:bool,int,long,float,complex,string,unicode,tuple,frozenset,buffer,slice
		- 可变对象:list,set,dict 和 高层次类对象
	- 赋值方式：
		- 支持赋值缩写,如a+=b格式
		- 支持多重赋值
			- 形式如：a,b=1,2，要求等号两端数量相等，否则会抛出异常
			- 形式如：value=1,2,3 则value为(1,2,3)元组
		- 赋值不会返回值，即不支持如 if a=func(): 方式使用
		- 支持连续赋值： x=y=1
			- 形式x=y=function()等同于y=function(),x=y，则x和y引用同一个对象
			- 但x=function(),y=function()，x和y分别引用了不同对象
- 算术运算符
	- 正负号(+-),加减乘(+-*),幂运算(**),取余数(%)
	- 除法(/) -都是整数时是整除，含有浮点数时是正常除法,向下取整除法(//)
- 比较运算符
	- 值比较：< <= > >= == != <>
	- 对象比较：is 和 is not -- 比较的是id(obj)，是否绑定到同相同对象
	- 允许连续比较操作，如x<y<=z>t
- 相等性和同一性：
	- 相等性，比较值：==
	- 同一性，是否绑定到同一个对象：is,is not
- 逻辑运算符、位操作运算符
	- and or not
	- ~ ^ & | << >>
- 类与对象关系：
	- isinstance(obj,classinfo) ->bool
	- issubclass(aclass,aparent)->bool
- 不支持的运算符：
	- 不支持++和--操作
	- 不支持三元运算符(?:)，替代 cond and expr_true or expr_false
- 支持+=,-=等缩写形式
- del操作：
	- 解除变量与对象间的绑定关系

## 流程控制
- 条件语句:
	- if cond: inst [ elif cond: inst ][ else: inst ]
	- 条件：
		- 条件中支持0<age<100形式
		- 序列的比较是逐一比较相同位置的元素
- 循环语句:
	- for var[,...] in iterable: inst [ else: inst]
	- while cond: inst [ else: inst]
	- 循环中的else子句，表示遍历所有情况都不满足才执行else部分
- 流程控制:
	- break,continue
	- return,yield

## 函数
- 函数定义与调用
	- 函数定义：def fctname([paramname[=defaultvalue][,...]][,*args][,**kwargs]): instructions
	- 文档字符串：
		- 作为函数对象的注释说明，可通过对象的__doc__属性查看，或通过help()查看
		- 定义：函数体第一个字符串，且该字符串在函数体的最上面，一般采用三引号字符串
- 函数参数：
	- 参数传递是传递的引用(即绑定关系)，区别改变绑定的对象还是改变绑定关系
	- 关键参数：如say(say='hello,',something='world!')：
		- 定义时刻定义默认参数值
		- 调用时可不用顾忌定义时的参数顺序
	- 不定长参数：
		- 参数\*前缀声明一个匿名tuple参数，参数\**前缀声明一个dict参数
		- 调用时，要使用\*和\**放在关键字参数前
		- 符号(\*和\**)对元组和字典的作用只在定义函数和调用函数时才起作用
		- 函数print_params(x,y,z=3,\*pospar,\**keypar)，调用print_params(1,2,3,4,5,6,7,foo=1,bar=2)
			- pospar收集位置参数中除x,y,z外的剩余参数，并将其放入到元组中，即pospar引用(4,5,6,7)
			- keypar收集额外的关键字参数，并将其放入到字典中，即keypar引用{'foo':1,'bar':2}
		- 对于函数add(x,y),value1=(1,2),value2={'x':1,'y':2}，可如下调用：add(1,2),add(\*value1),add(\**value2)
	- 默认参数、赋值参数、不定长参数
- 函数返回值：
	- 即使没有明确调用return返回值，默认也返回None
	- 返回值可以返回多个值，如 return 1,2,3
- 特殊函数：
	- 递归函数
	- 嵌套函数：
		- 在函数中定义函数，可以多层嵌套
		- 内层函数可以访问外层函数中定义的变量,即闭包
		- 内部函数中对外层函数同名变量赋值操作时，隐藏了外部函数的同名变量，所以使用+=形式操作会报错
		- 默认内层函数的local namespace不包含外层函数定义的变量，但引用外层变量后会加入到内层local namespace中
	- 生成器：
		- 从语法上讲，生成器是一个使用yield的函数
		- yield语句返回一个值给调用者并暂停执行，在调用next()方法时再继续执行
	- 协同程序
	- 内置函数：
		- apply(fnc[,args][,kw])
		- filter(func,seq)
		- map(func,seq[,seq2...])
		- reduce(func,seq[,init])
	- lambda函数:
		- lambda param[,...]: expression
		- 如 f=lambda a,b:a+b 等价于 def f(a,b): return a+b
		- 其中expression不能包含循环和条件语句
	- 对象函数：通过定义__call__(self,args)可将类对象当成函数调用
	- 函数对象：函数作为对象，可用于赋值、函数参数、函数返回值等
- 作用域：
	- 除了全局作用域外，每个函数调用都会创建一个局部作用域
	- 局部变量会在局部作用域中屏蔽同名全局变量 -- 不推荐使用全局变量
	- 在局部作用域中引用全局变量使用关键字global
	
## 异常处理
- 抛出异常
	- raise
	- raise exception_object
	- raise exception_class[,value [,traceback]]
- 捕获异常
	- try: inst except [except_class [,value]]: inst ... [else: inst]
	- try: inst finally: inst
- 异常类结构